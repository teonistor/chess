<html lang="en">
<head>
    <title>Basic Chess</title>
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <link rel="stylesheet" href="main.css" />
</head>

<body>

<div id="app">

    <h2>Basic But Not So Basic Chess</h2>

    <div class="play-area-inner">
        <div v-for="(row,i) in positions"
             :key="i">
            <span v-for="(position,j) in row"
                  :key="j"
                  :class="{cell: true, dark: !!((i + j) % 2), light: !((i + j) % 2), target: targets.indexOf(position) > -1}"
                  @drop="drop($event, position)"
                  @dragover="allowDrop($event)">

                <img v-if="board.hasOwnProperty(position)"
                     :src="pieceBox[board[position]]"
                     :class="{provisional: provisional === position}"
                     :draggable="!dragStart"
                     @dragstart="drag(position)">

                <span v-else class="img-placeholder"></span>
            </span>
        </div>
    </div>

    <v-container>
      <div v-if="!stompClient">
        <v-btn elevation="7" x-large dark
               @click="connect()">
          Lost connection? Reconnect
        </v-btn>
      </div>

      <v-btn elevation="7" x-large dark
             disabled >
        Save
      </v-btn>

      <v-btn elevation="7" x-large dark
             disabled >
        Load
      </v-btn>

      <v-btn elevation="7" x-large dark
             :disabled="!!restCallsGoing"
             @click="newStandardGame()">
        New (Standard)
      </v-btn>

      <v-btn elevation="7" x-large dark
             disabled >
        New (Turnless)
      </v-btn>

<!-- TODO I'd like this instead of 2 buttons above but there seems to be a bug with v-select when running in client only mode (or who knows) -->
<!--      <v-select elevation="7" dense solo x-large-->
<!--                label="New game"-->
<!--                v-model="newGameSelection"-->
<!--                :items="newGameOptions"-->
<!--      ></v-select>-->

    </v-container>

<!--    <div>-->
<!--        Black on top-->
<!--        <v-switch v-model="whiteOnTop" style="display: inline-block; vertical-align: middle"></v-switch>-->
<!--        White on top-->
<!--    </div>-->

<!--    <div>-->
<!--        Normal pieces-->
<!--        <v-switch v-model="outlandishPieces" style="display: inline-block; vertical-align: middle"></v-switch>-->
<!--        Outlandish pieces-->
<!--    </div>-->


</div>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="stomp.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0-0/axios.min.js"></script>
<script src="game.js"></script>

</body>
</html>
